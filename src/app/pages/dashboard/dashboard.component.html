<sub-header [title]="'Dashboard'" [iconClass]="'bi bi-graph-up-arrow'"></sub-header>
<div class="dashboard-container">
      <div *ngIf="!isLoadingReport">
        <div class="results">
          <div class="d-flex align-items-center">

            <h2 class="m-0">{{title}}</h2>
            <div class="vr me-2 ms-2"></div>
            <i class="bi bi-pen-fill" style="font-size: 21px;"></i>
          </div>
          <div class="container-fluid">
            <div class="back-container mt-4 cursor-pointer" *ngIf="isEnteselected" >
              <h5 (click)="ngOnInit()"><i class="bi bi-arrow-left-circle" style="font-size: 20px;"></i>Torna al Report Generale</h5>
              <div class="p-0 m-0 border-bottom container-fluid w-100"></div>
            </div>
            <div class="grid-dashboard">
              <div class="pie-graph">
                  <h5>{{pieGraphTitle}}</h5>
                <ngx-charts-pie-chart
                  [results]="pieData"
                  [legend]="true"
                  [labels]="true"
                  [doughnut]="false"
                  [explodeSlices]="false"
                  [gradient]="false"
                  [view]="[700, 400]"
                  (select)="onEnteSelected($event)">
                </ngx-charts-pie-chart>
               
              </div>
              <div class="stats" *ngIf="!isEnteselected">
                  <h5>{{summaryStatsTable}}</h5>
                  <li>Totale importi: {{ statsData.totale_importi | number:'1.2-2' }} €</li>
                  <li>Totale verbali: {{ statsData.totale_verbali }}</li>
                  <li>Media importo: {{ statsData.media | number:'1.2-2' }} €</li>
              </div>
               <div class="stats" *ngIf="isEnteselected">
                  <h5>{{summaryStatsTable}}</h5>
                  <li>Fisso Inserito: {{ statsData.fissoinserito | number:'1.2-2' }} €</li>
                  <li>Fisso Spedito: {{ statsData.fissospedito | number:'1.2-2' }} €</li>
                  <li>Percentuale Sanzione: {{ statsData.percsanzione | number:'1.2-2' }} %</li>
                  <li>Fisso Responsabile: {{ statsData.fissoresponsabile | number:'1.2-2' }} €</li>
                  <li>% sul Rendicontato: {{ statsData.rendicontatoperc | number:'1.2-2' }} %</li>
              </div>
            </div>
            
              <div class="row col-xs-12 mt-4 p-0">
                <div class="col-4">
                  <div>
                    <!-- <button class="btn btn-primary" (click)="openDetailsPage();">
                      <i class="bi bi-box-arrow-up-right"></i> Dettaglio
                    </button> -->
                  </div>
                </div>
                <div class="col-2"></div>
                <div class="col-1"></div>
                <div class="col-5 p-0 text-end">
                  <p *ngIf="!isEnteselected"><small>Seleziona un ente dal grafico per aprirne il dettaglio</small></p>
                  <div *ngIf="isEnteselected">
                    <button class="btn btn-primary" (click)="openDetailsPage()">
                      <i class="bi bi-box-arrow-up-right"></i> Dettaglio
                    </button> 
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      <div class="d-flex justify-content-center" *ngIf="isLoadingReport">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span> <!-- This is hidden for accessibility -->
        </div>
        <span class="ms-2">Loading...</span> <!-- This remains static -->
      </div>
  </div>
